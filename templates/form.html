<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>O2RUN 완주증 생성</title>
    <style>
      :root{
        --bg:#f6f9fc; --card:#ffffff; --ink:#0f172a; --muted:#6b7280;
        --primary:#10b981; --primary-d:#0ea371; --ring: rgba(16,185,129,.25); --border:#e5e7eb;
        --input-bg:#ffffff;
      }
      *{box-sizing:border-box}
      body{
        background: radial-gradient(1200px 600px at 20% -10%, #e6f7f1 0%, rgba(230,247,241,0) 70%), var(--bg);
        margin:0; padding:2rem;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", sans-serif;
        color: var(--ink);
      }
      .card{
        max-width:760px; margin:0 auto; background:var(--card);
        border-radius:20px; padding:28px;
        box-shadow:0 10px 35px rgba(2,6,23,.06);
        border:1px solid rgba(226,232,240,.6);
      }

      /* 헤더: 로고+제목 정렬 & 간격 조정 */
      .head{display:flex; align-items:center; gap:8px; margin-bottom:10px;}
      .brand{width:56px; height:56px; object-fit:contain; display:block;} /* ← 살짝 키움 */
      .title-wrap{display:flex; flex-direction:column; justify-content:center;}
      h1{font-size:1.35rem; line-height:1.1; margin:0;}
      p.desc{color:var(--muted); margin:6px 0 16px; font-size:.95rem;}

      form{display:grid; grid-template-columns:1fr 1fr; gap:18px;}
      .row-2{grid-column:span 2;}

      /* 텍스트 인풋 (플로팅 라벨) */
      .field{position:relative; padding-top:6px;} /* ↑ 라벨이 밖으로 올라갈 공간 */
      .field input{
        width:100%;
        padding:22px 14px 14px;
        border-radius:14px; border:1.2px solid var(--border);
        background:var(--input-bg); font-size:1.02rem;
        transition:border-color .2s, box-shadow .2s, background .2s; color:var(--ink);
      }
      .field input::placeholder{color:transparent;}
      .field label{
        position:absolute; left:12px; top:50%; transform:translateY(-50%);
        color:#94a3b8; font-size:1rem; padding:0 6px; background:var(--card);
        pointer-events:none; transition:all .18s ease;
      }
      /* 라벨이 위 테두리를 가리지 않게 입력 박스 '밖'으로 올림 */
      .field input:focus{ outline:none; border-color:var(--primary); box-shadow:0 0 0 5px var(--ring); }
      .field input:focus + label,
      .field input:not(:placeholder-shown) + label{
        top:-8px;                      /* ← 바깥으로 이동 */
        font-size:.78rem; color:#059669;
      }

      /* 셀렉트(코스) */
      .select{ position:relative; }
      .select label{
        position:absolute; left:12px; top:8px;
        font-size:.78rem; color:#059669; background:var(--card); padding:0 6px;
      }
      .select select{
        width:100%; appearance:none; -webkit-appearance:none; -moz-appearance:none;
        padding:26px 44px 12px 14px;
        border-radius:14px; border:1.2px solid var(--border);
        background:var(--input-bg); font-size:1.02rem; color:var(--ink);
        transition:border-color .2s, box-shadow .2s, background .2s;
      }
      .select select:focus{ outline:none; border-color:var(--primary); box-shadow:0 0 0 5px var(--ring); }
      .select::after{
        content:"▾"; position:absolute; right:14px; top:50%; transform:translateY(-10%);
        color:#94a3b8; pointer-events:none; font-size:1rem;
      }

      .error{ color:#dc2626; font-size:.86rem; margin-top:6px; }

      input:-webkit-autofill{
        -webkit-box-shadow:0 0 0 1000px var(--input-bg) inset !important;
        -webkit-text-fill-color:var(--ink) !important;
        transition:background-color 5000s ease-in-out 0s;
      }

      .actions{
        display:flex; gap:12px; align-items:center; justify-content:center; margin-top:8px;
      }
      button.primary{
        background:var(--primary); color:#fff; border:none;
        padding:16px 22px; border-radius:14px; font-weight:700; font-size:1.08rem;
        letter-spacing:.2px; cursor:pointer;
        transition:transform .06s, background .2s, box-shadow .2s;
        box-shadow:0 8px 20px rgba(16,185,129,.18);
      }
      button.primary:hover{background:var(--primary-d);}
      button.primary:active{transform:translateY(1px);}

      .hint{color:#64748b; font-size:.9rem; margin-top:10px;}
      .samples{color:#94a3b8; font-size:.86rem; margin-top:4px;}

      @media (max-width:640px){
        body{padding:1.2rem;}
        form{grid-template-columns:1fr;}
        .row-2{grid-column:span 1;}
        .brand{width:48px; height:48px;} /* 모바일도 살짝 키운 채 유지 */
      }
    </style>
  </head>
  <body>
    <div class="card">
      <div class="head">
        <img src="{{ url_for('static', filename='o2run-logo.png') }}" alt="O2RUN" class="brand" />
        <div class="title-wrap">
          <h1>O2RUN 완주증 생성</h1>
        </div>
      </div>

      <form id="certForm" action="/generate" method="post" autocomplete="on" novalidate>
        <div class="field">
          <input id="name" name="name" placeholder=" " required />
          <label for="name">이름 / Name</label>
        </div>
        <div class="field">
          <input id="bib" name="bib" placeholder=" " required inputmode="numeric" pattern="[0-9A-Za-z- ]+" />
          <label for="bib">배번 / Bib</label>
        </div>

        <div class="select row-2">
          <label for="course">코스 / Course</label>
          <select id="course" name="course" required>
            <option value="" disabled selected hidden>코스 선택</option>
            <option value="3.22km">3.22km</option>
            <option value="6.50km">6.50km</option>
          </select>
          {% if err == 'course' %}
            <div class="error">코스를 선택해 주세요.</div>
          {% endif %}
          <div id="courseErr" class="error" style="display:none;">코스를 선택해 주세요.</div>
        </div>

        <div class="row-2 actions">
          <button class="primary" type="submit">완주증 다운로드</button>
        </div>
      </form>


    </div>

    <script>
      // 코스 미선택 시 제출 방지 + 오류 표시
      const form = document.getElementById('certForm');
      const course = document.getElementById('course');
      const courseErr = document.getElementById('courseErr');
      form.addEventListener('submit', (e) => {
        if (!course.value) {
          e.preventDefault();
          courseErr.style.display = 'block';
          course.focus();
        } else {
          courseErr.style.display = 'none';
        }
      });
    </script>
  </body>
</html>
