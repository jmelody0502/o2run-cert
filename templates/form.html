<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>O2RUN 완주증 생성</title>
    <style>
      :root{
        --bg:#f6f9fc; --card:#ffffff; --ink:#0f172a; --muted:#6b7280;
        --primary:#10b981; --primary-d:#0ea371; --ring: rgba(16,185,129,.25); --border:#e5e7eb;
        --input-bg:#ffffff;
      }
      *{box-sizing:border-box}
      body{
        background: radial-gradient(1200px 600px at 20% -10%, #e6f7f1 0%, rgba(230,247,241,0) 70%), var(--bg);
        margin:0; padding:2rem;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", sans-serif;
        color: var(--ink);
      }
      .card{
        max-width:760px; margin:0 auto; background:var(--card);
        border-radius:20px; padding:28px;
        box-shadow:0 10px 35px rgba(2,6,23,.06);
        border:1px solid rgba(226,232,240,.6);
      }

      /* 헤더 정렬 + 간격 */
      .head{display:flex; align-items:center; gap:8px; margin-bottom:10px;}
      .brand{width:56px; height:56px; object-fit:contain; display:block;}
      .title-wrap{display:flex; flex-direction:column; justify-content:center;}
      h1{font-size:1.35rem; line-height:1.1; margin:0;}
      p.desc{color:var(--muted); margin:6px 0 16px; font-size:.95rem;}

      form{display:grid; grid-template-columns:1fr 1fr; gap:18px;}
      .row-2{grid-column:span 2;}

      /* ===== 입력박스(이름/배번): 라벨을 '안쪽 상단'에 고정 ===== */
      .field{position:relative;}
      .field input{
        width:100%;
        padding:30px 14px 12px;          /* ↑ 라벨 자리 확보 */
        border-radius:14px; border:1.2px solid var(--border);
        background:var(--input-bg); font-size:1.02rem;
        transition:border-color .2s, box-shadow .2s; color:var(--ink);
      }
      .field label{
        position:absolute; left:14px; top:8px;    /* 박스 '안쪽' 상단 고정 */
        font-size:.78rem; color:#059669;          /* 코스와 동일한 스타일 */
        padding:0 2px; background:transparent;    /* 테두리 가리지 않도록 투명 */
        pointer-events:none;
      }
      .field input:focus{ outline:none; border-color:var(--primary); box-shadow:0 0 0 5px var(--ring); }

      /* ===== 셀렉트(코스) ===== */
      .select{ position:relative; }
      .select label{
        position:absolute; left:14px; top:8px;
        font-size:.78rem; color:#059669; background:transparent; padding:0 2px;
      }
      .select select{
        width:100%; appearance:none; -webkit-appearance:none; -moz-appearance:none;
        padding:30px 44px 12px 14px;              /* 라벨 자리 확보 */
        border-radius:14px; border:1.2px solid var(--border);
        background:var(--input-bg); font-size:1.02rem; color:var(--ink);
        transition:border-color .2s, box-shadow .2s;
      }
      .select select:focus{ outline:none; border-color:var(--primary); box-shadow:0 0 0 5px var(--ring); }
      .select::after{
        content:"▾"; position:absolute; right:14px; top:50%; transform:translateY(-10%);
        color:#94a3b8; pointer-events:none; font-size:1rem;
      }

      .error{ color:#dc2626; font-size:.86rem; margin-top:6px; }

      .actions{
        display:flex; gap:12px; align-items:center; justify-content:center; margin-top:8px;
      }
      button.primary{
        background:var(--primary); color:#fff; border:none;
        padding:16px 22px; border-radius:14px; font-weight:700; font-size:1.08rem;
        letter-spacing:.2px; cursor:pointer;
        transition:transform .06s, background .2s, box-shadow .2s;
        box-shadow:0 8px 20px rgba(16,185,129,.18);
      }
      button.primary:hover{background:var(--primary-d);}
      button.primary:active{transform:translateY(1px);}

      .hint{color:#64748b; font-size:.9rem; margin-top:10px;}
      .samples{color:#94a3b8; font-size:.86rem; margin-top:4px;}

      @media (max-width:640px){
        body{padding:1.2rem;}
        form{grid-template-columns:1fr;}
        .row-2{grid-column:span 1;}
        .brand{width:48px; height:48px;}
      }
    </style>
  </head>
  <body>
    <div class="card">
      <div class="head">
        <img src="{{ url_for('static', filename='o2run-logo.png') }}" alt="O2RUN" class="brand" />
        <div class="title-wrap">
          <h1>O2RUN 완주증 생성</h1>
          <p class="desc">이름, 배번, 코스 선택만 하면 즉시 PNG로 내려받아요. (일자 고정: 2025.10.18)</p>
        </div>
      </div>

      <form id="certForm" action="/generate" method="post" autocomplete="on" novalidate>
        <div class="field">
          <label for="name">이름 / Name</label>
          <input id="name" name="name" required />
        </div>
        <div class="field">
          <label for="bib">배번 / Bib</label>
          <input id="bib" name="bib" required inputmode="numeric" pattern="[0-9A-Za-z- ]+" />
        </div>

        <div class="select row-2">
          <label for="course">코스 / Course</label>
          <select id="course" name="course" required>
            <option value="" disabled selected hidden>코스 선택</option>
            <option value="3.22km">3.22km</option>
            <option value="6.50km">6.50km</option>
          </select>
          {% if err == 'course' %}<div class="error">코스를 선택해 주세요.</div>{% endif %}
          <div id="courseErr" class="error" style="display:none;">코스를 선택해 주세요.</div>
        </div>

        <div class="row-2 actions">
          <button class="primary" type="submit">완주증 PNG 다운로드</button>
        </div>
      </form>

      <div class="hint">⚠︎ 한글이 네모로 보이면 <code>static/fonts/</code> 폴더에 <b>NotoSansKR-Regular.ttf</b> 같은 한글 폰트를 넣어주세요.</div>
      <div class="samples">예시: 이름 – 홍길동 · 배번 – 123 · 코스 – (선택) · (일자 고정 – 2025.10.18)</div>
    </div>

    <script>
      // 코스 미선택 시 제출 방지 + 오류 표시
      const form = document.getElementById('certForm');
      const course = document.getElementById('course');
      const courseErr = document.getElementById('courseErr');
      form.addEventListener('submit', (e) => {
        if (!course.value) {
          e.preventDefault();
          courseErr.style.display = 'block';
          course.focus();
        } else {
          courseErr.style.display = 'none';
        }
      });
    </script>
  </body>
</html>
